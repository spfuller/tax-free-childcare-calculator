<div class="container">
  <div class="card">
    <div class="card-body">
      <h3 class="card-title">Tax-Free Childcare Calculator</h3>

      @for (amount of totals(); track $index; let i = $index) {
      <div class="mb-3">
        <div class="row g-2 align-items-center">
          <div class="col-auto">
            <label class="col-form-label">Child {{ i + 1 }}</label>
          </div>
          <div class="col">
            <input
              class="form-control"
              type="number"
              min="0"
              step="0.01"
              [value]="amount"
              (input)="updateAmount(i, $any($event.target).value)"
              aria-label="Child invoice total"
            />
          </div>
          <div class="col-auto">
            <button
              class="btn btn-danger"
              (click)="removeChild(i)"
              [disabled]="totals().length <= 1"
            >
              Remove
            </button>
          </div>
        </div>

        <div class="mt-2">
          <small
            >YOU: <strong>{{ fmt(shareFor(i).user) }}</strong></small
          >
          <small class="ms-3"
            >GOVERNMENT: <strong>{{ fmt(shareFor(i).government) }}</strong></small
          >
        </div>
      </div>
      }

      <div class="d-flex gap-2">
        <button class="btn btn-primary" (click)="addChild()">Add child</button>
      </div>

      <hr />

      <div class="d-flex justify-content-between">
        <div>Total you pay:</div>
        <div>
          <strong>{{ fmt(totalUser()) }}</strong>
        </div>
      </div>
      <div class="d-flex justify-content-between">
        <div>Total government pays:</div>
        <div>
          <strong>{{ fmt(totalGovernment()) }}</strong>
        </div>
      </div>
    </div>
  </div>
</div>
